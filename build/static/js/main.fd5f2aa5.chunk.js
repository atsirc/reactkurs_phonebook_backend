(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{38:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var c=t(14),o=t.n(c),a=t(1),r=t.n(a),u=t(3),i=t(4),s=t.n(i),l="/api/persons",d=function(e){return e.then((function(e){return e.data}))},b=function(){return d(s.a.get(l))},j=function(e){return d(s.a.post(l,e))},f=function(e,n){return d(s.a.put("".concat(l,"/").concat(e),n))},h=function(e){return d(s.a.delete("".concat(l,"/").concat(e)))},m=t(0),p=function(e){var n=e.person,t=e.delFunction;return Object(m.jsxs)("li",{children:[n.name," ",n.number,Object(m.jsx)("button",{onClick:function(){return t(n.name,n.id)},children:"Delete"})]})},O=function(e){var n=e.persons,t=e.deleteNumber;return Object(m.jsx)("ul",{children:n.map((function(e){return Object(m.jsx)(p,{person:e,delFunction:t},e.id)}))})},x=function(e){var n=e.onSubmit,t=e.onChange,c=e.fields;return Object(m.jsxs)("form",{onSubmit:n,children:[Object(m.jsx)("div",{children:c.map((function(e,n){return Object(m.jsxs)("p",{children:[e.name,": ",Object(m.jsx)("input",{name:e.name,onChange:t,value:e.value})]},n)}))}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{type:"submit",children:"add"})})]})},v=function(e){var n=e.onChange,t=e.value;return Object(m.jsxs)("div",{children:["filter shown with ",Object(m.jsx)("input",{name:"search",onChange:n,value:t})]})},w=function(e){var n=e.message,t=e.type;if(n)return Object(m.jsx)("p",{className:"notification ".concat(t),children:n})},g=function(){var e=Object(a.useState)(""),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),r=Object(u.a)(o,2),i=r[0],s=r[1],l=Object(a.useState)(""),d=Object(u.a)(l,2),p=d[0],g=d[1],y=Object(a.useState)([]),k=Object(u.a)(y,2),C=k[0],S=k[1],T=Object(a.useState)(null),N=Object(u.a)(T,2),D=N[0],F=N[1],E=[{name:"name",value:t},{name:"number",value:i}];Object(a.useEffect)((function(){b().then(S)}),[]);var J=function(e){var n=e.target.value;switch(e.target.name){case"search":g(n);break;case"name":c(n);break;case"number":s(n);break;default:console.log("something went wrong")}};return Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"Phonebook"}),D?Object(m.jsx)(w,{message:D.text,type:D.type}):Object(m.jsx)(m.Fragment,{}),Object(m.jsx)(v,{onChange:J,value:p}),Object(m.jsx)("h2",{children:"add new contact"}),Object(m.jsx)(x,{onSubmit:function(e){e.preventDefault(),function(e){var n=C.find((function(e){return e.name===t}));return"undefined"===typeof n?j(e).then((function(e){S(C.concat(e)),F({text:"".concat(e.name," was added to the phonebook"),type:"success"}),setTimeout((function(){F(null)}),5e3)})).catch((function(e){var n=e.response.data.error;n=Object.values(n).map((function(e){return e.message})),F({text:n.join(" "),type:"error"}),setTimeout((function(){F(null)}),5e3)})):window.confirm("".concat(t," is already added to the phonebook, do you want to replace the old number with a new one?"))?f(n.id,e).then((function(e){S(C.map((function(t){return t.id!==n.id?t:e}))),F({text:"".concat(e.name,"'s number was changed"),type:"success"}),setTimeout((function(){F(null)}),5e3)})).catch((function(t){F({text:"".concat(e.name," was already deleted from the phonebook"),type:"error"}),setTimeout((function(){F(null)}),5e3),S(C.filter((function(e){return e.id!==n.id})))})):void 0}({name:t,number:i}).then((function(e){c(""),s("")})).catch(console.log)},onChange:J,fields:E}),Object(m.jsxs)("h2",{children:["Numbers ",p.length>0?"filtered by ".concat(p):""]}),Object(m.jsx)(O,{persons:C.filter((function(e){return e.name.toLowerCase().includes(p.toLowerCase())})),deleteNumber:function(e,n){window.confirm("Do you really want to delete ".concat(e))&&h(n).then((function(t){S(C.filter((function(e){return e.id!==n}))),F({text:"".concat(e," was deleted from the phonebook"),type:"success"}),setTimeout((function(){F(null)}),5e3)}))}})]})};t(38);o.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(g,{})}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.fd5f2aa5.chunk.js.map