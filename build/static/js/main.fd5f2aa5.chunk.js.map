{"version":3,"sources":["services/phonebook.js","components/Person.js","components/Persons.js","components/Form.js","components/Search.js","components/Notification.js","App.js","index.js"],"names":["url","request","response","then","r","data","axios","get","newObject","post","id","put","delete","Person","person","delFunction","name","number","onClick","Persons","persons","deleteNumber","map","Form","onSubmit","onChange","fields","field","i","value","type","Search","Notification","message","className","App","useState","newName","setNewName","newNumber","setNewNumber","search","setSearch","setPersons","setMessage","useEffect","services","handleChange","event","target","console","log","text","preventDefault","personObj","existingPerson","find","addedPerson","concat","setTimeout","catch","error","errors","Object","values","join","window","confirm","changedNumber","filter","handleAddNumber","length","toLowerCase","includes","deletedNumber","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.fd5f2aa5.chunk.js","sourcesContent":["import axios from \"axios\"\nconst url = \"/api/persons\"\n\nconst request = (response) => {\n    return response.then(r => r.data)\n}\n\nconst getAll = () => {\n    return request(axios.get(url))\n}\n\nconst create = newObject => {\n    return request(axios.post(url, newObject))\n}\n\nconst update = (id, newObject) => {\n    return request(axios.put(`${url}/${id}`, newObject))\n}\n\nconst deleteNumber = id => {\n    return request(axios.delete(`${url}/${id}`))\n}\n\nexport default { getAll, create, update, deleteNumber }\n  ","import React from 'react'\n\nconst Person = ({ person, delFunction }) => {\n  return (\n    <li>\n      {person.name} {person.number}\n      <button onClick={()=> delFunction(person.name, person.id)}>Delete</button>  \n    </li>\n  )\n}\n\nexport default Person","import React from 'react'\nimport Person from \"./Person\"\n\nconst Persons = ({ persons, deleteNumber }) => {\n  return (\n    <ul>\n        {persons.map(person => <Person key={person.id} person={person} delFunction={deleteNumber}/> )}\n    </ul>\n  )\n}\n\nexport default Persons","import React from 'react'\n\nconst Form = ({onSubmit, onChange, fields}) => {\n  return (\n    <form onSubmit={onSubmit}>\n        <div>\n            { fields.map((field,i) => <p key={i}>{field.name}: <input name={field.name} onChange={onChange} value={field.value}/></p>)}\n        </div>\n        <div>\n          <button type=\"submit\">add</button>\n        </div>\n      </form>\n  )\n}\n\nexport default Form","import React from 'react'\n\nconst Search = ({onChange, value }) => {\n  return (\n    <div>\n        filter shown with <input name=\"search\" onChange={onChange} value={value}/>\n    </div>\n    )\n}\n\nexport default Search","import React from 'react'\n\nconst Notification = ({ message, type }) => {\n\n\n    if (message) {\n    return (\n        <p className={`notification ${type}`}>\n            {message}\n        </p>\n    )\n    }\n}\n\nexport default Notification","import React, {useState, useEffect} from \"react\"\nimport services from \"./services/phonebook\"\nimport Persons from \"./components/Persons.js\"\nimport Form from \"./components/Form\"\nimport Search from \"./components/Search\"\nimport Notification from \"./components/Notification\"\n\nconst App = () => {\n  const [ newName, setNewName ] = useState('')\n  const [ newNumber, setNewNumber] = useState('')\n  const [ search, setSearch ] = useState('')\n  const [ persons, setPersons ] = useState([])\n  const [ message, setMessage] = useState(null)\n  const fields = [\n    {name: \"name\", value: newName},\n    {name: \"number\", value: newNumber}\n  ]\n  const hook =() => {\n    services.getAll().then(setPersons)\n\t}\n\n\tuseEffect(hook, [])\n\n  const handleAddNumber = (personObj) => {\n    const existingPerson = persons.find(person => person.name === newName)\n\n    if (typeof(existingPerson) !== 'undefined') {\n      if (window.confirm(`${newName} is already added to the phonebook, do you want to replace the old number with a new one?`)) {\n        return services.update(existingPerson.id, personObj).then( changedNumber => {\n            setPersons( persons.map( person =>\n              person.id !== existingPerson.id ? person : changedNumber))\n            setMessage( {\n              text: `${changedNumber.name}'s number was changed`,\n              type: \"success\"}\n            )\n            setTimeout(() => { setMessage(null)}, 5000)\n          }\n        ).catch(error =>{\n          setMessage( {\n            text: `${personObj.name} was already deleted from the phonebook`,\n            type: \"error\"}\n          )\n          setTimeout(() => { setMessage(null)}, 5000)\n          setPersons(persons.filter(person => person.id !== existingPerson.id))\n        })\n      }\n    } else {\n      return services.create(personObj).then(addedPerson => {\n        setPersons(persons.concat(addedPerson))\n        setMessage( {\n          text: `${addedPerson.name} was added to the phonebook`,\n          type: \"success\"}\n        )\n        setTimeout(() => { setMessage(null)}, 5000)\n      }).catch(error => {\n          let errors = error.response.data.error\n          errors = Object.values(errors).map(field => field.message)\n          setMessage({\n              text: errors.join(' '),\n              type: \"error\" \n          })\n          setTimeout(()=> {setMessage(null)}, 5000)\n      })\n    }\n  }\n\n  const addNumber = (event) => {\n    event.preventDefault()\n    const personObj = {\n      name: newName,\n      number: newNumber\n    }\n    handleAddNumber(personObj).then(response => {\n      setNewName(\"\")\n      setNewNumber(\"\")\n    }).catch(console.log)\n  }\n\n  const deleteNumber = (name, id) => {\n    if (window.confirm(`Do you really want to delete ${name}`)) {\n      services.deleteNumber(id).then( deletedNumber => {\n        setPersons(persons.filter(person => person.id !== id))\n        setMessage( {\n          text: `${name} was deleted from the phonebook`,\n          type: \"success\"}\n        )\n        setTimeout(() => { setMessage(null)}, 5000)\n      })\n    }\n  }\n\n  const handleChange = (event) => {\n    const value = event.target.value\n    switch (event.target.name) {\n      case \"search\": setSearch(value); break;\n      case \"name\" : setNewName(value); break;\n      case \"number\": setNewNumber(value); break;\n      default: console.log('something went wrong')\n    }\n  }\n  const performSearch = () => {\n    return persons.filter(person =>\n        person.name.toLowerCase()\n        .includes(search.toLowerCase()))\n  }\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      {message ? <Notification message={message.text} type={message.type} /> : <></>}\n      <Search onChange={handleChange} value={search}/>\n      <h2>add new contact</h2>\n      <Form onSubmit={addNumber} onChange={handleChange} fields={fields}/>\n      <h2>Numbers {search.length > 0 ? `filtered by ${search}` : \"\"}</h2>\n      <Persons persons={performSearch()} deleteNumber={deleteNumber} />\n    </div>\n  )\n}\n\nexport default App;\n","import ReactDOM  from 'react-dom';\nimport React from \"react\";\nimport App from './App';\nimport \"./index.css\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n"],"sourceRoot":""}